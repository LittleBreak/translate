# 如何在React中构建组件

编程可以说是相当复杂的任务，尤其构建清晰的代码十分困难。我们需要关注很多的元素，变量的命名，函数作用域，处理异常，确保安全，监控性能问题等等。**在编程中如果仍要说出最难解决的问题的话，我觉得是编写低耦合高内聚的组件。** 这和我们讨论面向对象或者是函数式编程没有什么关联。构建系统是最难的事情，并且它会影响到整个项目。在设计软件架构上需要花费数年的时间才可以精通（也许一个人永远不会掌握它，在这样一个快速发展的行业中精通者总是会领先一步，总会有一些方法去提高设计）。

我十分享受`react` 上的工作，并且我认为最大的优点是`React` 特别简易。简易并不同于简单[simple&easy](https://www.infoq.com/presentations/Simple-Made-Easy). 我真的认为`React` 是简易的。当然你需要花费一些时间去了解它。但是当你理解一些核心的理念后，剩下的就变得顺其自然了。最难的一部分如下。

## 耦合 & 内聚
这里有个指标或多或少可用来描述在代码中去改变行为是多么困难。耦合和内聚的概念源于面向对象编程并且适用与一些class。我们使用他们到`React` 组件中，既然规则同样适用。

耦合是元素之间的联系或是一种依赖。如果盖面一个元素*需要* 修改另外的元素，我们可以说是紧耦合。如果元素是低耦合的,改变一个元素不意味着另外的元素需要做更改。举个例子，我们来看一下展示银行转账金额。如果显示知道比率是怎么计算的，那么无论何时内部转账结构发生变化，显示代码也需要更新。如果我们设计一个系统是低耦合的，依赖一个元素的接口，那么转账的变化就不会导致展示层的改变。低耦合的组件会更易管理和维护。

内聚告诉我们如果元素的职责构成一个组件。该指标与单责原则相联系或是`unix` 原则：`do one thing and di it well`. 如果账户余额的格式化程序也计算利率和检查允许显示的历史，那么它有很多的职责并且并不相关。也许这里应该由不同的组件来控制权限或是计算利率。另一方面，如果有不同的组件，一个用来负责整数部分，一个用来负责小数部分，一个用来负责货币类型，那么每次程序想要展示余额，需要找到所有的元素。面对的挑战是创建高内聚的组件。

## 构建组件

我们可以用许多中方式来构建组件。我们希望组件是可以复用的，但只能达到合理的程度。我们希望构建可以用来构建更大概念的小组件。理想情况下，我们希望构建低耦合高内聚的组件，这样我们的系统会更易维护和发展。在`React` 组件中属性可以作为函数的参数所以可以用来构建无状态的组件。**我们如何在组件中定义属性，定义一个组件如何去复用。**

我们使用费用管理并且我们来分析费用明细格式化。让我们假设费用模型如下
```
type Expense {
  description: string
  category: string
  amount: number
  doneAt: moment
}
```

这里有几种可能去模拟费用明细格式化组件

* 无属性控制
*  传递费用相关对象
*  只传递需要用的属性
*  传递属性的数组
*  传递格式作为children

